<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Nepal Income Tax Calculator | FY 2081/82 (2024/25)</title>

    <meta name="description" content="Calculate your annual income tax in Nepal for the fiscal year 2081/82 (2024/25). A simple, free, real-time tool to understand your tax liability and net monthly salary.">

    <meta name="keywords" content="nepal income tax calculator, tax calculator nepal, income tax nepal, fy 2081/82, tax slabs nepal, provident fund, cit, ssf, tax exemptions, net salary nepal">

    <link rel="canonical" href="https://tax.buddhag.com.np/">

    <meta property="og:title" content="Nepal Income Tax Calculator | FY 2081/82">
    <meta property="og:description" content="Instantly calculate your income tax and net monthly salary in Nepal based on the latest tax slabs and deduction rules.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tax.buddhag.com.np/">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f9fafb;
            --surface-color: #ffffff;
            --primary-color: #3b82f6; /* A more modern blue */
            --primary-hover-color: #2563eb;
            --secondary-color: #10b981; /* A gentle teal/green for gradients */
            --text-color: #1f2937;
            --text-light-color: #6b7280;
            --border-color: #e5e7eb;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --border-radius: 12px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            background-image: linear-gradient(to bottom right, #f9fafb, #f3f4f6);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 2rem 1rem;
        }

        .container {
            width: 100%;
            max-width: 850px;
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 3rem;
            transition: all 0.3s ease-in-out;
            border: 1px solid var(--border-color);
        }

        header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.25rem;
        }

        header p {
            color: var(--text-light-color);
            font-size: 1rem;
        }
        
        .intro-text {
            text-align: center;
            color: var(--text-light-color);
            margin-bottom: 2.5rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.75rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-color);
        }

        input, select {
            width: 100%;
            padding: 0.85rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: border-color 0.2s, box-shadow 0.2s;
            background-color: #f9fafb;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .input-with-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .input-with-toggle input {
            flex-grow: 1;
        }
        
        .toggle-group {
            display: flex;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            flex-shrink: 0;
        }

        .toggle-group label {
            margin: 0;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            background-color: #f1f3f5;
            font-size: 0.85rem;
            transition: background-color 0.2s, color 0.2s;
            white-space: nowrap;
        }

        .toggle-group input[type="radio"] {
            display: none;
        }

        .toggle-group input[type="radio"]:checked + label {
            background-color: var(--primary-color);
            color: white;
            font-weight: 500;
        }

        #results {
            margin-top: 3rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            max-height: 0;
            overflow: hidden;
        }
        
        #results.visible {
            opacity: 1;
            transform: translateY(0);
            max-height: 2500px; /* Increased to avoid clipping */
        }

        .summary-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 1.25rem;
            margin-bottom: 2.5rem;
        }

        .summary-card {
            background-color: var(--bg-color);
            padding: 1.25rem;
            border-radius: var(--border-radius);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            flex: 1 1 160px;
        }
        .summary-card:hover {
             transform: translateY(-4px);
             box-shadow: var(--shadow);
        }

        .summary-card h3 {
            font-size: 0.9rem;
            color: var(--text-light-color);
            font-weight: 500;
            margin-bottom: 0.5rem;
            white-space: nowrap; /* --- THIS IS THE FIX --- */
        }
        
        .summary-card p {
            font-size: clamp(1.1rem, 4vw, 1.4rem);
            font-weight: 600;
            color: var(--text-color);
        }
        
        h2 {
            font-size: 1.5rem;
            font-weight: 600;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .breakdown-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 0;
        }
        
        .breakdown-table th, .breakdown-table td {
            padding: 0.85rem 1rem;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            white-space: nowrap;
        }
        
        .breakdown-table th {
            font-weight: 600;
            background-color: #f9fafb;
            color: var(--text-light-color);
        }
        
        #suggestions ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        #suggestions li {
            background-color: #ecfdf5;
            color: #047857;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--success-color);
        }
        
        #suggestions li.suggestion-warning {
            background-color: #fffbeb;
            color: #b45309;
            border-left-color: var(--warning-color);
        }

        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-bottom: 2.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
        }

        #info-section {
            margin-top: 3rem;
            border-top: 1px solid var(--border-color);
            padding-top: 2rem;
        }

        #info-section summary {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            cursor: pointer;
            list-style: none;
            position: relative;
            padding-left: 1.5rem;
            transition: color 0.2s;
        }
        
        #info-section summary:hover {
            color: var(--primary-hover-color);
        }

        #info-section summary::before {
            content: 'â–¶';
            position: absolute;
            left: 0;
            font-size: 0.8rem;
            transition: transform 0.2s ease-in-out;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
        }

        #info-section details[open] > summary::before {
            transform: translateY(-50%) rotate(90deg);
        }

        .info-content {
            padding-top: 1.5rem;
            color: var(--text-light-color);
        }

        .info-content h3 {
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            color: var(--text-color);
            font-weight: 600;
            border: none;
            padding: 0;
        }
        
        .info-content h4 {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            font-weight: 500;
        }

        .info-content p, .info-content li {
            margin-bottom: 1rem;
        }

        .info-content ul {
            list-style-type: none;
            padding-left: 0;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .info-content li {
            background-color: var(--bg-color);
            padding: 1rem;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
            margin-bottom: 0;
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 0;
            font-size: 0.9rem;
        }

        .info-table th, .info-table td {
            padding: 0.75rem 1rem;
            text-align: center;
            border: 1px solid var(--border-color);
            white-space: nowrap;
        }

        .info-table th {
            background-color: #f9fafb;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            body { padding: 1rem; }
            .container { padding: 1.5rem; }
            .form-grid { grid-template-columns: 1fr; gap: 1rem; }
            header h1 { font-size: 1.75rem; }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "What are the income tax slabs in Nepal for FY 2081/82?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "For unmarried individuals, the tax slabs are: 1% on the first NPR 500,000, 10% on the next 200,000, 20% on the next 300,000, 30% on the next 1,000,000, and 36% on income above 2,000,000. For married couples, the first slab is 1% on NPR 600,000."
        }
      },{
        "@type": "Question",
        "name": "What is the maximum tax deduction for retirement funds in Nepal?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The maximum tax deduction for contributions to approved retirement funds (like PF, CIT, SSF) is the lowest of: your actual contribution, one-third of your gross income, or a maximum cap of NPR 500,000 per year."
        }
      },{
        "@type": "Question",
        "name": "How much can I claim for life and medical insurance in Nepal?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "You can claim a tax deduction for up to NPR 40,000 per year for life insurance premiums and up to NPR 20,000 per year for medical insurance premiums."
        }
      }]
    }
    </script>
</head>
<body>

    <div class="container">
        <header>
            <h1>Nepal Income Tax Calculator</h1>
            <p>For Fiscal Year 2081/82 (2024/25)</p>
        </header>

        <p class="intro-text">
            Calculate your income tax for Nepal FY 2081/82 instantly. Enter your salary and deductions to see your tax breakdown, net salary, and savings tips.
        </p>

        <form id="tax-form" class="form-grid">
            <div class="form-group">
                <label for="marital-status">Marital Status</label>
                <select id="marital-status">
                    <option value="single">Single</option>
                    <option value="married">Married</option>
                </select>
            </div>
            <div class="form-group">
                <label for="monthly-salary">Monthly Salary (NPR)</label>
                <input type="number" id="monthly-salary" placeholder="e.g., 80000" min="0" required>
            </div>
            
            <div class="form-group full-width">
                <label for="annual-bonus">Annual Bonus / Other Income (NPR)</label>
                <input type="number" id="annual-bonus" placeholder="e.g., 80000" min="0">
            </div>

            <div class="form-group">
                <label for="pf-contribution">Provident Fund (PF/EPF)</label>
                <div class="input-with-toggle">
                    <input type="number" id="pf-contribution" placeholder="e.g., 8000" min="0">
                    <div class="toggle-group">
                        <input type="radio" id="pf-monthly" name="pf-period" value="monthly" checked>
                        <label for="pf-monthly">Monthly</label>
                        <input type="radio" id="pf-yearly" name="pf-period" value="yearly">
                        <label for="pf-yearly">Yearly</label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="cit-contribution">Citizen Investment Trust (CIT)</label>
                 <div class="input-with-toggle">
                    <input type="number" id="cit-contribution" placeholder="0" min="0">
                     <div class="toggle-group">
                        <input type="radio" id="cit-monthly" name="cit-period" value="monthly" checked>
                        <label for="cit-monthly">Monthly</label>
                        <input type="radio" id="cit-yearly" name="cit-period" value="yearly">
                        <label for="cit-yearly">Yearly</label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="ssf-contribution">Social Security Fund (SSF)</label>
                 <div class="input-with-toggle">
                    <input type="number" id="ssf-contribution" placeholder="0" min="0">
                     <div class="toggle-group">
                        <input type="radio" id="ssf-monthly" name="ssf-period" value="monthly" checked>
                        <label for="ssf-monthly">Monthly</label>
                        <input type="radio" id="ssf-yearly" name="ssf-period" value="yearly">
                        <label for="ssf-yearly">Yearly</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="life-insurance">Life Insurance Premium (Annual)</label>
                <input type="number" id="life-insurance" placeholder="e.g., 25000" min="0">
            </div>
            <div class="form-group">
                <label for="medical-insurance">Medical Insurance Premium (Annual)</label>
                <input type="number" id="medical-insurance" placeholder="e.g., 15000" min="0">
            </div>
             <div class="form-group">
                <label for="other-deductions">Other Deductions (Annual)</label>
                <input type="number" id="other-deductions" placeholder="0" min="0">
            </div>
        </form>

        <section id="results">
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>Gross Annual Income</h3>
                    <p id="summary-gross-income">NPR 0</p>
                </div>
                <div class="summary-card">
                    <h3>Annual In-Hand</h3>
                    <p id="summary-net-annual-salary">NPR 0</p>
                </div>
                <div class="summary-card">
                    <h3>Monthly In-Hand</h3>
                    <p id="summary-net-salary">NPR 0</p>
                </div>
                <div class="summary-card">
                    <h3>Total Annual Tax</h3>
                    <p id="summary-total-tax">NPR 0</p>
                </div>
                <div class="summary-card">
                    <h3>Monthly Tax</h3>
                    <p id="summary-monthly-tax">NPR 0</p>
                </div>
                <div class="summary-card">
                    <h3>Monthly Contributions</h3>
                    <p id="summary-monthly-contribution">NPR 0</p>
                </div>
                 <div class="summary-card">
                    <h3>Total Exemptions</h3>
                    <p id="summary-total-exemptions">NPR 0</p>
                </div>
                <div class="summary-card">
                    <h3>Taxable Income</h3>
                    <p id="summary-taxable-income">NPR 0</p>
                </div>
            </div>

            <div>
                <h2>Tax Slab Breakdown</h2>
                <div class="table-wrapper">
                    <table class="breakdown-table">
                        <thead>
                            <tr>
                                <th>Tax Slab (NPR)</th>
                                <th>Taxable Amount</th>
                                <th>Rate</th>
                                <th>Tax</th>
                            </tr>
                        </thead>
                        <tbody id="breakdown-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="suggestions">
                <h2>Tax Optimization Suggestions</h2>
                <ul id="suggestions-list"></ul>
            </div>
        </section>

        <section id="info-section">
             <details>
                <summary>Learn About Nepal's Income Tax Rules (FY 2081/82)</summary>
                <div class="info-content">
                    <h3>Income Tax Slabs</h3>
                    <p>Nepal's tax system is progressive, meaning the tax rate increases as your income increases. Here are the rates for salaried individuals.</p>
                    
                    <h4>For Individuals (Unmarried)</h4>
                    <div class="table-wrapper">
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>Taxable Income Slab (NPR)</th>
                                    <th>Tax Rate</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>First 500,000</td>
                                    <td>1% (Social Security Tax)</td>
                                </tr>
                                <tr>
                                    <td>Next 200,000 (500,001 to 700,000)</td>
                                    <td>10%</td>
                                </tr>
                                <tr>
                                    <td>Next 300,000 (700,001 to 1,000,000)</td>
                                    <td>20%</td>
                                </tr>
                                <tr>
                                    <td>Next 1,000,000 (1,000,001 to 2,000,000)</td>
                                    <td>30%</td>
                                </tr>
                                <tr>
                                    <td>Above 2,000,000</td>
                                    <td>36%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4>For Couples (Married)</h4>
                    <div class="table-wrapper">
                        <table class="info-table">
                             <thead>
                                <tr>
                                    <th>Taxable Income Slab (NPR)</th>
                                    <th>Tax Rate</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>First 600,000</td>
                                    <td>1% (Social Security Tax)</td>
                                </tr>
                                <tr>
                                    <td>Next 200,000 (600,001 to 800,000)</td>
                                    <td>10%</td>
                                </tr>
                                <tr>
                                    <td>Next 300,000 (800,001 to 1,100,000)</td>
                                    <td>20%</td>
                                </tr>
                                 <tr>
                                    <td>Next 900,000 (1,100,001 to 2,000,000)</td>
                                    <td>30%</td>
                                </tr>
                                <tr>
                                    <td>Above 2,000,000</td>
                                    <td>36%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                     <h3>Major Exemptions and Deductions</h3>
                     <p>You can reduce your taxable income by claiming the following deductions. The calculator automatically applies these limits.</p>
                     <ul>
                         <li>
                             <h4>Retirement Fund Contribution</h4>
                             Contributions to approved funds like Provident Fund (PF/EPF), Citizen Investment Trust (CIT), and Social Security Fund (SSF) are deductible. The maximum deduction is the <strong>lowest</strong> of:
                             <br> a) Actual contribution amount
                             <br> b) One-third (1/3rd) of your gross annual income
                             <br> c) <strong>NPR 500,000</strong>
                         </li>
                         <li>
                             <h4>Life Insurance Premium</h4>
                             You can claim a deduction for the premium paid on your life insurance policy, up to a maximum of <strong>NPR 40,000</strong> per year.
                         </li>
                         <li>
                             <h4>Medical Insurance Premium</h4>
                              You can claim a deduction for health insurance premiums paid for yourself or your family, up to a maximum of <strong>NPR 20,000</strong> per year.
                         </li>
                     </ul>
                </div>
            </details>
        </section>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const allInputs = document.querySelectorAll('#tax-form input, #tax-form select');

            // TAX CONSTANTS for FY 2081/82
            const CONSTANTS = {
                MAX_RETIREMENT_DEDUCTION: 500000,
                MAX_LIFE_INSURANCE_DEDUCTION: 40000,
                MAX_MEDICAL_INSURANCE_DEDUCTION: 20000,
                SLABS_SINGLE: [
                    { amount: 500000, rate: 0.01, label: "First 5,00,000" },
                    { amount: 200000, rate: 0.10, label: "Next 2,00,000" },
                    { amount: 300000, rate: 0.20, label: "Next 3,00,000" },
                    { amount: 1000000, rate: 0.30, label: "Next 10,00,000" },
                    { amount: Infinity, rate: 0.36, label: "Above 20,00,000" }
                ],
                SLABS_MARRIED: [
                    { amount: 600000, rate: 0.01, label: "First 6,00,000" },
                    { amount: 200000, rate: 0.10, label: "Next 2,00,000" },
                    { amount: 300000, rate: 0.20, label: "Next 3,00,000" },
                    { amount: 900000, rate: 0.30, label: "Next 9,00,000" },
                    { amount: Infinity, rate: 0.36, label: "Above 20,00,000" }
                ]
            };
            
            function runCalculation() {
                const inputs = getInputs();
                const results = calculateTax(inputs);
                displayResults(results);
            }

            allInputs.forEach(input => {
                input.addEventListener('input', runCalculation);
            });
            
            // Run calculation on page load in case of saved form values
            runCalculation();

            function getInputs() {
                const getVal = (id) => parseFloat(document.getElementById(id).value) || 0;
                const getPeriod = (name) => document.querySelector(`input[name="${name}"]:checked`).value;

                return {
                    maritalStatus: document.getElementById('marital-status').value,
                    monthlySalary: getVal('monthly-salary'),
                    annualBonus: getVal('annual-bonus'),
                    pfContribution: getVal('pf-contribution'),
                    pfPeriod: getPeriod('pf-period'),
                    citContribution: getVal('cit-contribution'),
                    citPeriod: getPeriod('cit-period'),
                    ssfContribution: getVal('ssf-contribution'),
                    ssfPeriod: getPeriod('ssf-period'),
                    lifeInsurance: getVal('life-insurance'),
                    medicalInsurance: getVal('medical-insurance'),
                    otherDeductions: getVal('other-deductions')
                };
            }

            function calculateTax(inputs) {
                // Gross Income
                const annualSalary = inputs.monthlySalary * 12;
                const grossAnnualIncome = annualSalary + inputs.annualBonus;
                
                // Retirement Fund Calculation
                const getAnnualContribution = (amount, period) => period === 'monthly' ? amount * 12 : amount;
                const totalRetirementContribution = getAnnualContribution(inputs.pfContribution, inputs.pfPeriod) +
                                                  getAnnualContribution(inputs.citContribution, inputs.citPeriod) +
                                                  getAnnualContribution(inputs.ssfContribution, inputs.ssfPeriod);
                
                // Exemption Calculation
                const retirementExemption = Math.min(
                    totalRetirementContribution,
                    grossAnnualIncome / 3,
                    CONSTANTS.MAX_RETIREMENT_DEDUCTION
                );
                const lifeInsuranceExemption = Math.min(inputs.lifeInsurance, CONSTANTS.MAX_LIFE_INSURANCE_DEDUCTION);
                const medicalInsuranceExemption = Math.min(inputs.medicalInsurance, CONSTANTS.MAX_MEDICAL_INSURANCE_DEDUCTION);
                
                const totalExemptions = retirementExemption + lifeInsuranceExemption + medicalInsuranceExemption + inputs.otherDeductions;
                
                // Taxable Income
                const taxableIncome = Math.max(0, grossAnnualIncome - totalExemptions);

                // Tax Calculation
                const slabs = inputs.maritalStatus === 'single' ? CONSTANTS.SLABS_SINGLE : CONSTANTS.SLABS_MARRIED;
                let remainingIncome = taxableIncome;
                let totalTax = 0;
                const taxBreakdown = [];

                for (const slab of slabs) {
                    if (remainingIncome <= 0) break;
                    
                    const taxableInSlab = Math.min(remainingIncome, slab.amount);
                    const taxInSlab = taxableInSlab * slab.rate;
                    
                    totalTax += taxInSlab;
                    remainingIncome -= taxableInSlab;
                    
                    if (taxableInSlab > 0) {
                        taxBreakdown.push({
                            label: slab.label,
                            amount: taxableInSlab,
                            rate: slab.rate * 100,
                            tax: taxInSlab
                        });
                    }
                }
                
                // Net Salary Calculation
                const monthlyTax = totalTax / 12;
                const getMonthlyContribution = (amount, period) => period === 'monthly' ? amount : amount / 12;

                const monthlyPF = getMonthlyContribution(inputs.pfContribution, inputs.pfPeriod);
                const monthlyCIT = getMonthlyContribution(inputs.citContribution, inputs.citPeriod);
                const monthlySSF = getMonthlyContribution(inputs.ssfContribution, inputs.ssfPeriod);
                const monthlyInsurance = (inputs.lifeInsurance + inputs.medicalInsurance) / 12;
                
                const monthlyContributions = monthlyPF + monthlyCIT + monthlySSF + monthlyInsurance;
                
                const netMonthlySalary = inputs.monthlySalary - monthlyTax - monthlyContributions;
                const netAnnualSalary = netMonthlySalary * 12 + inputs.annualBonus;

                // Suggestions
                const suggestions = [];
                const maxPossibleRetirementExemption = Math.min(grossAnnualIncome / 3, CONSTANTS.MAX_RETIREMENT_DEDUCTION);
                const remainingRetirementPotential = maxPossibleRetirementExemption - totalRetirementContribution;
                
                if (remainingRetirementPotential > 0) {
                    suggestions.push({
                        text: `You can contribute NPR ${formatNPR(remainingRetirementPotential)} more to retirement funds (PF, CIT, SSF) to maximize your tax savings.`,
                        type: 'tip'
                    });
                } else if (totalRetirementContribution > maxPossibleRetirementExemption) {
                    const overContribution = totalRetirementContribution - maxPossibleRetirementExemption;
                     suggestions.push({
                        text: `You have contributed NPR ${formatNPR(overContribution)} more to retirement funds than the deductible limit. This extra amount provides no additional tax benefits.`,
                        type: 'warning'
                    });
                }
                
                const lifeInsuranceOver = inputs.lifeInsurance - CONSTANTS.MAX_LIFE_INSURANCE_DEDUCTION;
                if (lifeInsuranceOver > 0) {
                     suggestions.push({
                        text: `Your Life Insurance premium of NPR ${formatNPR(inputs.lifeInsurance)} exceeds the NPR ${formatNPR(CONSTANTS.MAX_LIFE_INSURANCE_DEDUCTION)} limit. NPR ${formatNPR(lifeInsuranceOver)} is not tax-deductible.`,
                        type: 'warning'
                    });
                } else {
                    const remainingLifeInsurance = CONSTANTS.MAX_LIFE_INSURANCE_DEDUCTION - inputs.lifeInsurance;
                    if (remainingLifeInsurance > 0) {
                        suggestions.push({
                            text: `You can claim up to NPR ${formatNPR(remainingLifeInsurance)} more on Life Insurance premiums.`,
                            type: 'tip'
                        });
                    }
                }
                
                const medicalInsuranceOver = inputs.medicalInsurance - CONSTANTS.MAX_MEDICAL_INSURANCE_DEDUCTION;
                if(medicalInsuranceOver > 0) {
                     suggestions.push({
                        text: `Your Medical Insurance premium of NPR ${formatNPR(inputs.medicalInsurance)} exceeds the NPR ${formatNPR(CONSTANTS.MAX_MEDICAL_INSURANCE_DEDUCTION)} limit. NPR ${formatNPR(medicalInsuranceOver)} is not tax-deductible.`,
                        type: 'warning'
                    });
                } else {
                    const remainingMedicalInsurance = CONSTANTS.MAX_MEDICAL_INSURANCE_DEDUCTION - inputs.medicalInsurance;
                    if (remainingMedicalInsurance > 0) {
                        suggestions.push({
                            text: `You can claim up to NPR ${formatNPR(remainingMedicalInsurance)} more on Medical Insurance premiums.`,
                            type: 'tip'
                        });
                    }
                }

                if (suggestions.length === 0) {
                    suggestions.push({
                        text: "You're doing a great job at maximizing your tax exemptions!",
                        type: 'tip'
                    });
                }

                return {
                    grossAnnualIncome,
                    totalExemptions,
                    taxableIncome,
                    totalTax,
                    monthlyTax: totalTax / 12,
                    monthlyContributions,
                    netMonthlySalary,
                    netAnnualSalary, 
                    taxBreakdown,
                    suggestions
                };
            }

            function displayResults(results) {
                const resultsSection = document.getElementById('results');

                // Populate summary
                document.getElementById('summary-gross-income').innerHTML = `NPR&nbsp;${formatNPR(results.grossAnnualIncome)}`;
                document.getElementById('summary-total-exemptions').innerHTML = `NPR&nbsp;${formatNPR(results.totalExemptions)}`;
                document.getElementById('summary-taxable-income').innerHTML = `NPR&nbsp;${formatNPR(results.taxableIncome)}`;
                document.getElementById('summary-total-tax').innerHTML = `NPR&nbsp;${formatNPR(results.totalTax)}`;
                document.getElementById('summary-monthly-tax').innerHTML = `NPR&nbsp;${formatNPR(results.monthlyTax)}`;
                document.getElementById('summary-monthly-contribution').innerHTML = `NPR&nbsp;${formatNPR(results.monthlyContributions)}`;
                document.getElementById('summary-net-salary').innerHTML = `NPR&nbsp;${formatNPR(results.netMonthlySalary)}`;
                document.getElementById('summary-net-annual-salary').innerHTML = `NPR&nbsp;${formatNPR(results.netAnnualSalary)}`;


                // Populate breakdown table
                const breakdownBody = document.getElementById('breakdown-body');
                breakdownBody.innerHTML = '';
                results.taxBreakdown.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.label}</td>
                        <td>${formatNPR(item.amount)}</td>
                        <td>${item.rate.toFixed(2)}%</td>
                        <td>${formatNPR(item.tax)}</td>
                    `;
                    breakdownBody.appendChild(row);
                });
                
                // Add total row for breakdown table
                if (results.totalTax > 0) {
                    const totalRow = document.createElement('tr');
                    totalRow.style.fontWeight = 'bold';
                    totalRow.style.backgroundColor = 'var(--bg-color)';
                    totalRow.innerHTML = `
                        <td colspan="3" style="text-align: right; padding-right: 1rem;">Total Annual Tax</td>
                        <td>${formatNPR(results.totalTax)}</td>
                    `;
                    breakdownBody.appendChild(totalRow);
                }
                
                // Populate suggestions
                const suggestionsList = document.getElementById('suggestions-list');
                suggestionsList.innerHTML = '';
                results.suggestions.forEach(suggestion => {
                   const li = document.createElement('li');
                   li.textContent = suggestion.text;
                   if (suggestion.type === 'warning') {
                       li.classList.add('suggestion-warning');
                   }
                   suggestionsList.appendChild(li);
                });

                // Show results with animation
                resultsSection.classList.add('visible');
            }

            function formatNPR(number) {
                return new Intl.NumberFormat('en-IN', { maximumFractionDigits: 2 }).format(number);
            }
        });
    </script>
</body>
</html>
